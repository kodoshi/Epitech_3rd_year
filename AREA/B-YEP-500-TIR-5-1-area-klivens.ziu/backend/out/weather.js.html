<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: weather.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: weather.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const request = require('request');
require('dotenv').config()

var weatherKey = process.env.WEATHER_KEY
var locationURLPrefix = "http://api.openweathermap.org/data/2.5/weather?q=";
var coordsURLPrefix = "http://api.openweathermap.org/data/2.5/weather?";
var urlSuffix = '&amp;APPID=' + weatherKey + "&amp;units=metric";


/**
 * get weather method, returns info to the weather service
 *
 * @param {object} req HTTP request from express
 * @param {object} res HTTP response from express
 * @returns {object} data
 */
exports.getWeather = (req, res) => {
  let location = req.query.location;
  let latAndLon = "lat=" + req.query.latitude + '&amp;' + "lon=" + req.query.longitude;

  try {
    if (location == "geo") {
      let url = coordsURLPrefix + latAndLon + urlSuffix;
      request(url, function (error, response, body) {
        //metrics = JSON.parse(body)
        //An e-mail will be sent if humidity is more than 80%
        res.send(body);
      });
    } else {
      let url = locationURLPrefix + location + urlSuffix;
      request(url, function (error, response, body) {
        //metrics = JSON.parse(body)
        //An e-mail will be sent if humidity is more than 80%
        res.send(body);
      });
    }
  } catch (err) {
    console.log(err)
  }
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#allUsers">allUsers</a></li><li><a href="global.html#createPost">createPost</a></li><li><a href="global.html#deleteAll">deleteAll</a></li><li><a href="global.html#deletePost">deletePost</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#fetchData">fetchData</a></li><li><a href="global.html#finalize_email_send">finalize_email_send</a></li><li><a href="global.html#getLogs">getLogs</a></li><li><a href="global.html#getNorrisData">getNorrisData</a></li><li><a href="global.html#getPosts">getPosts</a></li><li><a href="global.html#getUser">getUser</a></li><li><a href="global.html#getWeather">getWeather</a></li><li><a href="global.html#hasAuthorization">hasAuthorization</a></li><li><a href="global.html#isPoster">isPoster</a></li><li><a href="global.html#photo">photo</a></li><li><a href="global.html#postById">postById</a></li><li><a href="global.html#postsByUser">postsByUser</a></li><li><a href="global.html#react_with_email">react_with_email</a></li><li><a href="global.html#react_with_text_channel">react_with_text_channel</a></li><li><a href="global.html#react_with_voice_channel">react_with_voice_channel</a></li><li><a href="global.html#requireSignin">requireSignin</a></li><li><a href="global.html#signin">signin</a></li><li><a href="global.html#signout">signout</a></li><li><a href="global.html#signup">signup</a></li><li><a href="global.html#singlePost">singlePost</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#userById">userById</a></li><li><a href="global.html#userPhoto">userPhoto</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Mar 18 2021 10:21:59 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
